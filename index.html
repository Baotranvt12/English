<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>H·ªçc T·ª´ V·ª±ng Ti·∫øng Anh</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f4f8;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
    }

    textarea {
      width: 100%;
      max-width: 500px;
      height: 120px;
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 16px;
      resize: none;
    }

    button {
      padding: 10px 15px;
      background: #0078d7;
      border: none;
      color: white;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
      margin: 5px;
    }

    button:hover {
      background: #005fa3;
    }

    #quiz {
      margin-top: 20px;
      width: 100%;
      max-width: 500px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      display: none;
    }

    .question {
      font-size: 18px;
      margin-bottom: 10px;
    }

    input[type=text] {
      width: 100%;
      padding: 8px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-bottom: 10px;
    }

    .result {
      font-weight: bold;
      margin-top: 5px;
    }

    .correct {
      color: green;
    }

    .incorrect {
      color: red;
    }

    #backBtn {
      background: #777;
    }

    #backBtn:hover {
      background: #555;
    }

    @media (max-width: 600px) {
      textarea, input[type=text] {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <h1>H·ªçc T·ª´ V·ª±ng Ti·∫øng Anh</h1>
  <p>Nh·∫≠p danh s√°ch t·ª´ v·ª±ng theo ƒë·ªãnh d·∫°ng: <br>
  <b>t·ª´_ti·∫øng_anh - nghƒ©a_ti·∫øng_vi·ªát</b>, m·ªói d√≤ng m·ªôt m·ª•c.<br>
  V√≠ d·ª•:<br>
  <i>dog - con ch√≥<br>apple - qu·∫£ t√°o</i></p>

  <textarea id="wordList" placeholder="Nh·∫≠p danh s√°ch t·ª´ v·ª±ng..."></textarea><br>
  <button id="startBtn">B·∫Øt ƒë·∫ßu h·ªçc</button>

  <div id="quiz">
    <div id="questionArea"></div>
    <input type="text" id="answerInput" placeholder="Nh·∫≠p t·ª´ ti·∫øng Anh...">
    <div>
      <button id="checkBtn">Ki·ªÉm tra</button>
      <button id="nextBtn" style="display:none;">Ti·∫øp theo</button>
    </div>
    <div id="feedback" class="result"></div>
    <div id="summary" style="margin-top:15px; font-weight:bold;"></div>
    <hr>
    <button id="backBtn">üîô Quay l·∫°i t·∫°o danh s√°ch m·ªõi</button>
  </div>

  <script>
    const startBtn = document.getElementById("startBtn");
    const wordList = document.getElementById("wordList");
    const quiz = document.getElementById("quiz");
    const questionArea = document.getElementById("questionArea");
    const answerInput = document.getElementById("answerInput");
    const checkBtn = document.getElementById("checkBtn");
    const feedback = document.getElementById("feedback");
    const nextBtn = document.getElementById("nextBtn");
    const summary = document.getElementById("summary");
    const backBtn = document.getElementById("backBtn");

    let words = [];
    let currentIndex = 0;

    const REQUIRED_CORRECT = 5; // M·ªói t·ª´ ƒë√∫ng 5 l·∫ßn ƒë∆∞·ª£c xem l√† thu·ªôc

    // H√†m x√°o tr·ªôn m·∫£ng
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // Khi nh·∫•n "B·∫Øt ƒë·∫ßu h·ªçc"
    startBtn.addEventListener("click", () => {
      const lines = wordList.value.trim().split("\n").filter(line => line.includes("-"));
      if (lines.length === 0) {
        alert("Vui l√≤ng nh·∫≠p danh s√°ch t·ª´ ƒë√∫ng ƒë·ªãnh d·∫°ng!");
        return;
      }
      words = lines.map(line => {
        const [en, vi] = line.split("-").map(x => x.trim());
        return { en, vi, correctCount: 0 };
      });

      shuffle(words); // X√°o tr·ªôn th·ª© t·ª± t·ª´
      currentIndex = 0;

      wordList.style.display = "none";
      startBtn.style.display = "none";
      quiz.style.display = "block";

      showQuestion();
    });

    // Hi·ªÉn th·ªã c√¢u h·ªèi
    function showQuestion() {
      feedback.textContent = "";
      nextBtn.style.display = "none";
      answerInput.value = "";
      summary.textContent = "";

      const unfinished = words.filter(w => w.correctCount < REQUIRED_CORRECT);
      if (unfinished.length === 0) {
        questionArea.innerHTML = "üéâ B·∫°n ƒë√£ thu·ªôc t·∫•t c·∫£ c√°c t·ª´!";
        answerInput.style.display = "none";
        checkBtn.style.display = "none";
        return;
      }

      // Ch·ªçn ng·∫´u nhi√™n t·ª´ ch∆∞a thu·ªôc
      const randomWord = unfinished[Math.floor(Math.random() * unfinished.length)];
      currentIndex = words.indexOf(randomWord);
      const current = words[currentIndex];

      questionArea.innerHTML = `<div class="question">${current.vi}: (Nh·∫≠p t·ª´ ti·∫øng Anh)</div>`;
      answerInput.focus();
    }

    // Khi nh·∫•n n√∫t ki·ªÉm tra
    checkBtn.addEventListener("click", () => {
      const answer = answerInput.value.trim().toLowerCase();
      const currentWord = words[currentIndex];
      if (!currentWord) return;

      if (answer === currentWord.en.toLowerCase()) {
        if (currentWord.correctCount < REQUIRED_CORRECT) {
          currentWord.correctCount++;
        }
        feedback.textContent = `‚úÖ Ch√≠nh x√°c! (${currentWord.correctCount}/${REQUIRED_CORRECT})`;
        feedback.className = "result correct";
      } else {
        feedback.textContent = `‚ùå Sai r·ªìi. ƒê√°p √°n ƒë√∫ng l√† "${currentWord.en}".`;
        feedback.className = "result incorrect";
      }

      nextBtn.style.display = "inline-block";
    });

    // Khi nh·∫•n n√∫t ti·∫øp theo
    nextBtn.addEventListener("click", () => {
      showQuestion();
    });

    // Khi nh·∫•n n√∫t quay l·∫°i
    backBtn.addEventListener("click", () => {
      quiz.style.display = "none";
      wordList.style.display = "block";
      startBtn.style.display = "inline-block";
      answerInput.style.display = "block";
      checkBtn.style.display = "inline-block";
      feedback.textContent = "";
      summary.textContent = "";
      wordList.value = "";
    });
  </script>
</body>
</html>
